<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<!-- Test comment -->
<html>
  <head>
    <title>Changelog: GBDK</title>
  </head>
  
  <body BGCOLOR="#C0C0FF" LINK="#CC0000" VLINK="#333333" ALINK="#333333" TEXT="#330000">
    <FONT FACE="Arial,Helvetica" SIZE="-1">
    <h1>Changelog: GBDK</h1>
    	<A NAME="Changes"></A>
    <H2>Changes in GBDK 2.1.0 (<A HREF="http://www.aracnet.com/~pfelber/GBDK/bin/SDK-gbz80-gb-2.1.0.zip">DOS</A>, <A HREF="http://www.aracnet.com/~pfelber/GBDK/bin/SDK-gbz80-gb-2.1.0.tar.gz">Linux</A>, and <A HREF="http://www.aracnet.com/~pfelber/GBDK/bin/SDK-2.1.0.tar.gz">Unix</A>) - 21 Apr 99</h2>

<UL>
	<LI>Added Michael's <CODE>maccer</CODE> macro preprocessor.
	<LI>Fixed the problems in the Color GB and sound examples.
	<LI>Fixed some minor bugs.
	<LI>Cleaned up the source distribution.
</UL>

<h2>Changes in GBDK 2.0.18 (<A HREF="http://www.aracnet.com/~pfelber/GBDK/bin/SDK-gbz80-gb-2.0.18.zip">DOS</A>, <A HREF="http://www.aracnet.com/~pfelber/GBDK/bin/SDK-gbz80-gb-2.0.18.tar.gz">Linux</A>, and <A HREF="http://www.aracnet.com/~pfelber/GBDK/bin/SDK-2.0.18.tar.gz">Unix</A>) - 26 Mar 99</h2>

<UL>
	<LI>Many bug fixes
	<LI>Greatly improved APA graphics library by Jon Fuge (thanks Jon!)
	<UL>
		<LI>Circle, rectangle, and line functions
		<LI>Ability to draw text on a graphics screen
		<LI>Pixel get/set functions
		<LI>Demo: examples/filltest.c
	</UL>
	<LI>New text output routines
	<UL>
		<LI>Able to have more than one font on the screen
		<LI>Able to allocate a range of tiles for background
		graphics
		<LI>ibm, clean (spectrum), italic, and minimal (36) tile
		fonts included
		<LI>Backwards compatible (hopefully)
		<LI>Demo: examples/fonts.c
	</UL>
	<LI>Improved CGB support (thanks Lars!)
	<LI>Library for playing samples (thanks Lars and Jeff!)
	<LI>Reworked malloc routines
	<LI>Removed the <CODE>__REG_XXXX</CODE> special variables. The optimizer automatically transforms <CODE>LD</CODE> into <CODE>LDH</CODE> when necessary.
</UL>

<h2>Changes in GBDK 2.0.17 (<A HREF="http://www.aracnet.com/~pfelber/GBDK/bin/SDK-gb-gb-2.0.17.zip">DOS</A> and <A HREF="http://www.aracnet.com/~pfelber/GBDK/bin/SDK-2.0.17.tar.gz">Unix</A>) - 26 Nov 98</h2>

<UL>
	<LI>Fixed a bug in the code generator (reported by John Panettiere).
	<LI>Added two examples for the Color GB: colorbar and a color version of the dscan game (contributed by Mr. N.U. of TeamKNOx). Some functions for the Color GB have been defind in the <CODE>cgb.s</CODE> library.
</UL>

<h2>Changes in GBDK 2.0.16 (<A HREF="ftp://ftp-lse.epfl.ch/pub/felber/emulation/gb/SDK-gb-gb-2.0.16.zip">DOS</A> and <A HREF="ftp://ftp-lse.epfl.ch/pub/felber/emulation/gb/SDK-2.0.16.tar.gz">Unix</A>) - 30 Oct 98</h2>

<UL>
	<LI>Fixed a bug in <CODE>get_sprite_tile()</CODE> and <CODE>get_sprite_prop()</CODE>.
	<LI>Added a DOS script (by Mark Rawer) for automating GBDK's installation on DOS machines.
	<LI>Added support for MBC5 (up to 512 ROM banks, and 16 RAM banks). Changed the way banks are switched. See the <CODE>banks.c</CODE> example.
	<LI>Started a SuperGB library. At the moment, one can only check if the game is running on a SuperGB or not. Be sure to put 0x03 at address 0x146 of the header if the game has to use SuperGB capabilities. This can be done using the <CODE>-Wl-yp0x146=0x03</CODE> flag.
	<LI>Many bug fixes and improvements in the libraries.
</UL>

<h2>Changes in GBDK 2.0.15 (<A HREF="ftp://ftp-lse.epfl.ch/pub/felber/emulation/gb/SDK-gb-gb-2.0.15.zip">DOS</A> and <A HREF="ftp://ftp-lse.epfl.ch/pub/felber/emulation/gb/SDK-2.0.15.tar.gz">Unix</A>) - 5 Oct 98</h2>

<UL>
	<LI>The new sources are based on lcc 4.1 (final version).
	<LI>Updated most examples and libraries so that they synchronize with vblank instead of using delays.
	<LI>The linker now generates symbol files for the no$gmb emulator natively.
	<LI>The sources of the latest GBDK version have been released.
</UL>

<h2>Changes in GBDK 2.0.14 (<A HREF="ftp://ftp-lse.epfl.ch/pub/felber/emulation/gb/SDK-gb-gb-2.0.14.zip">DOS</A> binary only) - 28 Sep 98</h2>

<UL>
	<LI>A preliminary version of the new GBDK documentation is available online.
	<LI>The new versions of GBDK use a new directory structure.
	<LI>Fixed a bug in the generation of the <CODE>STOP</CODE> instruction.
	<LI>Fixed a potential problem in the <CODE>wait_vbl()</CODE> function.
	<LI>Fixed a bug in the joypad libraries functions that prevented joypad interrupts to occur (reported by Helmut Schoettner).
	<LI>Updated the graphics functions so that they take into account the addresses specified in LCDC.
	<LI>The tile data transfer routines now allow to copy 256 tiles at once (instead of 255).
	<LI>Added random number generator (written by Luc Van den Borre).
	<LI>Added operations to get tile data, to scroll sprites, to move the background and the window, etc.
	<LI>Modified the semantics of the <CODE>set_win_data()</CODE> function so that it is consistent with other functions. This change requires adding <CODE>0x80</CODE> to the first parameter of this function call in existing programs.
	<LI>Exported the <CODE>cls()</CODE> function to the standard output library (reported by Helmut Schoettner).
	<LI>Added two flags (<CODE>-int8</CODE> and <CODE>-int16</CODE>) to specify the size of the integer type (default is 8 bits, which produces shorter and faster code).
</UL>

<h2>Changes in GBDK 2.0b13 (<A HREF="ftp://ftp-lse.epfl.ch/pub/felber/emulation/gb/gbdk-2.0-b13_gb-gb.zip">DOS</A> and <A HREF="ftp://ftp-lse.epfl.ch/pub/felber/emulation/gb/gbdk-2.0-b13_gb-gb_linux_glibc2.tar.gz">Linux</A> binaries) - 17 Aug 98</h2>

<UL>
	<LI>Fixed another bug in the assembler, that caused problems in code generation if no listing was output.
	<LI>Added a linker flag to modify the resulting output file upon ROM generation (for instance, to put 0x80 at address 0x143, use: <CODE>-Wl-yp0x143=0x80</CODE>).
	<LI>Added a <CODE>reset()</CODE> function to reset the GB (restart the program's execution).
	<LI>Added a variable <CODE>_cpu</CODE> that indicated the CPU of the machine on which the code is running (GB, Pocket GB, Color GB).
	<LI>Updated the linker (patch by Michael Hope). Linking is now much faster on slow systems.
	<LI>Added several libraries from Michael Hope (in particular, <CODE>memset</CODE>, <CODE>malloc</CODE>, <CODE>calloc</CODE>, and <CODE>free</CODE> are implemented).
	<LI>Sound is turned off by default (thanks Jeff).
	<LI>Float and long support is better but still far from complete.
	<LI>The linker map format is different, and should make writing a debugger
simpler.
</UL>

<h2>Changes in GBDK 2.0b12 (<A HREF="ftp://ftp-lse.epfl.ch/pub/felber/emulation/gb/GBDK-2.0b12.zip">DOS</A> binary only) - 16 Apr 98</h2>

<UL>
	<LI>Fixed a bug in <CODE>set_bkg_tiles</CODE>.
	<LI>Modified assembler to conform to gcc error standard (patch by Michael Hope).
	<LI>Corrected a bug that sometimes made the assembler and linker crash (patch by Michael Hope).
	<LI>Removed the linker problem that prevented to take the high/low byte of a relocatable address.
	<LI>New drawing library allowing full-screen drawing (based on GBAPA).
	<LI>New example program (<CODE>paint.c</CODE>) illustrating this library.
	<LI>Added primitive floating point support (but there is not support yet for reading and printing floating point values).
	<LI>Added primitive long long (32 bits) support (but there is not support yet for reading and printing floating point values).
	<LI>Changed interrupt handling. It is now possible to chain up to 8 interrupt handlers for each interrupt.
	<LI>Several changes in the names of assembly functions.
	<LI>Changed some compiler flags.
	<LI>Added support in the assembler for "official" mnemonics:
<PRE>
    LD (HLI),A
    LD (HLD),A
    LD A,(HLI)
    LD A,(HLD)
    ADD SP,offset
    LDHL SP,offset
</PRE>
</UL>

<h2>Changes in GBDK 2.0b11 (<A HREF="ftp://ftp-lse.epfl.ch/pub/felber/emulation/gb/GBDK-2.0b11.zip">DOS</A> binary only) - 24 Nov 97</h2>

<UL>
	<LI>Fixed another bug in code generation, that could happen when performing logical operations on 1-byte variables.
</UL>

<h2>Changes in GBDK 2.0b10 (<A HREF="ftp://ftp-lse.epfl.ch/pub/felber/emulation/gb/GBDK-2.0b10.zip">DOS</A> binary only) - 6 Nov 97</h2>

<UL>
	<LI>Fixed a nasty bug in code generation, that could happen when performing arithmetic operations on 1-byte variables.
	<LI>Changed the name of same files of the <CODE>gb-dtmf</CODE> example so that it compiles on DOS.
</UL>

<h2>Changes in GBDK 2.0b9 (<A HREF="ftp://ftp-lse.epfl.ch/pub/felber/emulation/gb/GBDK-2.0b9.zip">DOS</A> binary only)</h2>

<UL>
	<LI>Several bug fixes in the compiler and in the libraries.
</UL>

<h2>Changes in GBDK 2.0b8 (DOS binary only)</h2>

<UL>
	<LI>Limited all file names to 8 characters to solve problems on DOS.
	<LI>Added communication routines that enable to send data through the link port of the GameBoy. Unfortunately, these routines do not always work; so use them with care until the next GBDK release.
	<LI>Added the <CODE>comm.c</CODE> example which illustrates how to use communication routines.
	<LI>It is possible to specify the name of the program (to be written in the image header) at link time using the <CODE>-Wl-yn="XXX"</CODE> flag (where <CODE>X</CODE> is the name of the program, which can contain up to 16 characters in quotes, including spaces; on Unix, depending on your shell, you must add backslashes before quotes and spaces like in <CODE>-Wl-yn=\"My\ Game\"</CODE>).
	<LI>Several bug fixes in the compiler.
</UL>

<h2>Changes in GBDK 2.0b7 (DOS binary only)</h2>

<UL>
	<LI>GBDK now uses a pre-release of lcc 4.1 (DOS binary only), that fixes a couple of problems in code generation.
	<LI>A couple of important points have been documented in the <A HREF="#Guidelines">GBDK Programming Guidelines</A> and <A HREF="#Problems">Known Problems</A> sections.
	<LI>Several improvements and optimizations to the code generator.
</UL>

<h2>Changes in GBDK 2.0b6 (<A HREF="ftp://ftp-lse.epfl.ch/pub/felber/emulation/gb/GBDK-2.0b6.zip">DOS</A> and <A HREF="ftp://ftp-lse.epfl.ch/pub/felber/emulation/gb/GBDK-2.0b6.tar.gz">Unix</A>)</h2>

<UL>
	<LI>Added a peephole optimizer (with few rules at the moment).
	<LI>Changed the name of the hardware registers to match the "official" names.
	<LI>Added support for copying complete functions to RAM or HIRAM (<CODE>memcpy()</CODE> and <CODE>hiramcpy()</CODE> functions). The compiler now automatically generates two symbol for the start and the end of each function, named <CODE>start_X</CODE> and <CODE>end_X</CODE> (where <CODE>X</CODE> is the name of the function). This enables to calculate the length of a function when copying it to RAM.
	<LI>Added the <CODE>ram_fn.c</CODE> example which illustrates how to copy functions to RAM and HIRAM.
	<LI>Added support for installing interrupt handlers.
	<LI>Added the <CODE>irq.c</CODE> example which illustrates how to install interrupt handlers.
	<LI>Added RAM banks support (<CODE>switch_ram_bank()</CODE> function). The <CODE>switch_bank()</CODE> function has been renamed to <CODE>switch_rom_bank()</CODE>. The <CODE>banks.c</CODE> example has been updated. The flags for generating multiple bank images have been modified.
	<LI>It is possible to set the sprite ram location at link time using the <CODE>-Wl-g.OAM=#</CODE> flag (where <CODE>#</CODE> is the address of the sprite ram). The sprite ram address must begin at an address multiple of 0x100, and is 0xA0 bytes long.
</UL>

<h2>Changes in GBDK 2.0b5</h2>

<UL>
	<LI>New documentation (not finished yet).
	<LI>Fixed a bug that could generate wrong code in switch statements.
	<LI>Fixed a bug in <CODE>int</CODE> comparison.
	<LI>Added a DTMF program written by Osamu Ohashi.
	<LI>Added a game (Deep Scan) written by a friend of Osamu.
	<LI>Modified the <CODE>delay()</CODE> function so that it takes a long parameter. It can be used to wait between 1 and 65536 milliseconds (0 = 65536). The <CODE>pause()</CODE> function has been removed.
</UL>

<h2>Changes in GBDK 2.0b4</h2>

<UL>
	<LI>Fixed a bug that could generate wrong code when using hexadecimal constants.
	<LI>A new example (<CODE>galaxy.c</CODE>) has been added. It is the C version of the <CODE>space.s</CODE> example. <CODE>sprite.c</CODE> has been removed.
	<LI>Most of the libraries have been split into small modules for reducing final code size.
</UL>

<h2>Changes in GBDK 2.0b3</h2>

<UL>
	<LI>GBDK can generate multiple-banks images, i.e. images greater than 32kB (see the <CODE>banks</CODE> example).
	<LI>It is possible to set the stack pointer at link time using the <CODE>-Wl-g.STACK=#</CODE> flag (where <CODE>#</CODE> is the address of the stack pointer).
	<LI>Several functions (e.g. <CODE>show_bkg()</CODE>) have been changed into macros (e.g. <CODE>SHOW_BKG</CODE>).
	<LI>The <CODE>delay()</CODE> function waits exactly 1 millisecond, and the <CODE>pause()</CODE> waits 256 milliseconds.
	<LI>Linking with the standard libraries is no more required. The <CODE>lib/gb.lib</CODE> (<CODE>lib\gb.lib</CODE> on DOS) text file contains a list of modules in which to look for undefined symbols. The linker will parse this file, and link your code with the required modules only. The <CODE>stdio</CODE> library has been split in several object files, and only necessary modules will be added to your code, thus reducing its size.
	<LI>The GBDK distribution can be located anywhere in your system if you use the <CODE>-Wo-lccdir=GBDK-DIR</CODE> flag when invoking lcc.
	<LI>Bug fixes.
</UL>

<h2>Changes in GBDK 2.0b2</h2>

<UL>
	<LI>Lots of bug fixes.
	<LI>GBDK has to be in the <CODE>\GBDK-2.0</CODE> directory on DOS machines.
</UL>

<h2>Changes in GBDK 2.0b1</h2>

<UL>
	<LI>The code generator has been completely rewritten with the new version of lcc. It produces much smaller and more efficient code. The size of the code is generally between 20 and 50% smaller. A number of small optimizations are still to be done.
	<LI><B>The size of basic types has been changed:</B>
	<UL>
		<LI>An <CODE>int</CODE> is 8 bits.
		<LI>A <CODE>long</CODE> is 16 bits.
	</UL>
	This change was required for the code generator to produce better code, because the Z80 is actually an 8-bit processor.
	<LI>The linker generates the complement checksum correctly now.
	<LI>The libraries and example programs have been modified for the new code generator.
</UL>

<h2>Changes in GBDK 1.1</h2>

<UL>
	<LI>Removed Xloadimage from the GBDK distribution. It is now available as a separate archive.
	<LI>A compiled DOS version is now available (cross-compiled on my Sun Workstation!).
	<LI>The libraries and the example programs have been improved.
	<LI>The make script has been improved. Compiling on UNIX should be easier.
	<LI>Many bugfixes.
</UL>
<!-- begin footer -->
    <hr>
    <a href="default.htm">Back</a>
    <address><a href="mailto:michaelh@juju.net.nz">Michael Hope</a></address>
<!-- end footer -->
<!-- Created: Mon May 10 20:09:10 NZST 1999 -->
<!-- hhmts start -->
Last modified: Mon May 10 21:42:54 NZST 1999
<!-- hhmts end -->
      </FONT>
  </body>
</html>
